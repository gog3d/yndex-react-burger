{"ast":null,"code":"var _jsxFileName = \"/home/gog3d/JS/6-yndex-react/0-project/react-burger/src/components/burger-constructor-list-component/burger-constructor-list-component.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useRef } from 'react';\nimport styles from './burger-constructor-list-component.module.css';\nimport { DragIcon, ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useDrop, useDrag } from 'react-dnd'; //import {  DELETE_CONSTRUCTOR_INGREDIENT, UPDATE_CONSTRUCTOR_INGREDIENTS } from '../../redux/actions/ingredients';\n\nimport { deleteConstructorIngredient, updateConstructorIngredients } from '../../redux/actions/ingredients';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\n\nconst BurgerConstructorListComponent = props => {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    item,\n    index\n  } = props;\n  const ingredients = useSelector(store => store.ingredients.constructorIngredients.ingredients);\n  const [locked, setIsLocked] = useState(false);\n  const [type, setType] = useState('primary');\n\n  const onClickBurgerConstructorListComponent = () => {\n    dispatch({\n      type: deleteConstructorIngredient,\n      index: index\n    });\n  };\n\n  const moveIngredients = useCallback((dragIndex, hoverIndex) => {\n    const dragItem = ingredients[dragIndex];\n    const hoverItem = ingredients[hoverIndex];\n    const updatedIngredients = [...ingredients];\n    updatedIngredients[dragIndex] = hoverItem;\n    updatedIngredients[hoverIndex] = dragItem;\n    dispatch({\n      type: updateConstructorIngredients,\n      ingredients: updatedIngredients\n    });\n  }, [ingredients]);\n  const [{\n    isDragging\n  }, dragRef] = useDrag({\n    type: 'item',\n    item: {\n      index\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n  const [, dropRef] = useDrop({\n    accept: 'item',\n    hover: (item, monitor) => {\n      const dragIndex = item.index;\n      const hoverIndex = index;\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      const hoverActualY = monitor.getClientOffset().y - hoverBoundingRect.top;\n      if (dragIndex < hoverIndex && hoverActualY < hoverMiddleY) return;\n      if (dragIndex > hoverIndex && hoverActualY > hoverMiddleY) return;\n      moveIngredients(dragIndex, hoverIndex);\n      item.index = hoverIndex;\n    }\n  });\n  const ref = useRef(null);\n  const dragDropRef = dragRef(dropRef(ref));\n  const opacity = isDragging ? 0 : 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: dragDropRef,\n    className: styles[\"burger-constructor-list-component\"],\n    style: {\n      opacity\n    },\n    children: [/*#__PURE__*/_jsxDEV(DragIcon, {\n      className: styles['dragon-icon'],\n      type: type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ConstructorElement, {\n      handleClose: onClickBurgerConstructorListComponent,\n      isLocked: locked,\n      text: item.name,\n      price: item.price,\n      thumbnail: item.image\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 11\n  }, this);\n};\n\n_s(BurgerConstructorListComponent, \"FdFcH3f0K1nx4Eiyn8I9rE1iMsc=\", false, function () {\n  return [useDispatch, useSelector, useDrag, useDrop];\n});\n\n_c = BurgerConstructorListComponent;\nexport default BurgerConstructorListComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"BurgerConstructorListComponent\");","map":{"version":3,"names":["React","useState","useCallback","useRef","styles","DragIcon","ConstructorElement","useDispatch","useSelector","useDrop","useDrag","deleteConstructorIngredient","updateConstructorIngredients","BurgerConstructorListComponent","props","dispatch","item","index","ingredients","store","constructorIngredients","locked","setIsLocked","type","setType","onClickBurgerConstructorListComponent","moveIngredients","dragIndex","hoverIndex","dragItem","hoverItem","updatedIngredients","isDragging","dragRef","collect","monitor","dropRef","accept","hover","hoverBoundingRect","ref","current","getBoundingClientRect","hoverMiddleY","bottom","top","hoverActualY","getClientOffset","y","dragDropRef","opacity","name","price","image"],"sources":["/home/gog3d/JS/6-yndex-react/0-project/react-burger/src/components/burger-constructor-list-component/burger-constructor-list-component.tsx"],"sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './burger-constructor-list-component.module.css';\nimport { DragIcon, ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useDrop, useDrag } from 'react-dnd';\n//import {  DELETE_CONSTRUCTOR_INGREDIENT, UPDATE_CONSTRUCTOR_INGREDIENTS } from '../../redux/actions/ingredients';\nimport {\n \n  deleteConstructorIngredient,\n  updateConstructorIngredients,\n \n} from '../../redux/actions/ingredients';\n\nimport { TIngredient } from '../../redux/action-types/data';\nimport { RootState }  from '../../redux/action-types';\n\ninterface BurgerConstructorListComponentProps {\n  item: TIngredient,\n  index: number,\n};\n\nconst BurgerConstructorListComponent: React.FC<BurgerConstructorListComponentProps> = (props) => {\n  const dispatch = useDispatch();\n  const { item, index } = props;\n\n  const ingredients = useSelector((store: RootState) => store.ingredients.constructorIngredients.ingredients);\n\n  const [locked, setIsLocked] =useState(false);\n  const [type, setType] = useState('primary')\n\n  const onClickBurgerConstructorListComponent = () => {\n    dispatch({ type: deleteConstructorIngredient, index: index });\n  };\n\n  const moveIngredients = useCallback(\n      (dragIndex: number, hoverIndex: number) => {\n      const dragItem = ingredients[dragIndex];\n      const hoverItem = ingredients[hoverIndex];\n      const updatedIngredients = [...ingredients];\n      updatedIngredients[dragIndex] = hoverItem;\n      updatedIngredients[hoverIndex] = dragItem;\n      dispatch({ type: updateConstructorIngredients, ingredients: updatedIngredients });\n    },\n    [ingredients]\n  )\n\n  const [{ isDragging }, dragRef] = useDrag({\n    type: 'item',\n    item: { index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [, dropRef] = useDrop({\n    accept: 'item',\n    hover: (item: {index: number}, monitor) => {\n      const dragIndex = item.index;\n      const hoverIndex = index;\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      const hoverActualY = monitor.getClientOffset().y - hoverBoundingRect.top;\n        if (dragIndex < hoverIndex && hoverActualY < hoverMiddleY) return;\n        if (dragIndex > hoverIndex && hoverActualY > hoverMiddleY) return;\n          moveIngredients(dragIndex, hoverIndex);\n            item.index = hoverIndex;\n    },\n  })\n\n  const ref = useRef(null)\n  const dragDropRef = dragRef(dropRef(ref))\n  const opacity = isDragging ? 0 : 1\n\n  return (\n          <div \n            ref={dragDropRef} \n            className={styles[\"burger-constructor-list-component\"]} \n            style={{opacity}} \n            >\n            <DragIcon className={styles['dragon-icon']} type={type} />\n            <ConstructorElement\n              handleClose={onClickBurgerConstructorListComponent}\n              isLocked={locked}\n              text={item.name}\n              price={item.price}\n              thumbnail={item.image}\n            />\n          </div>\n  );\n}\n\nexport default BurgerConstructorListComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}