{"ast":null,"code":"import { createAction } from \"@reduxjs/toolkit\"; //import { baseURL }  from '../../utils/config';\n//import { getLoginRequestApi } from './fakeApiAuth';\n\nimport { checkResponse } from '../utils';\nimport { setCookie, getCookie, deleteCookie, fetchRequest } from '../utils';\nimport { GET_LOGIN_REQUEST, GET_LOGIN_SUCCESS, GET_LOGIN_FAILED, GET_REGISTER_REQUEST, GET_REGISTER_SUCCESS, GET_REGISTER_FAILED, GET_LOGOUT_REQUEST, GET_LOGOUT_SUCCESS, GET_LOGOUT_FAILED, GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILED, GET_REFRESH_USER_REQUEST, GET_REFRESH_USER_SUCCESS, GET_REFRESH_USER_FAILED, GET_AUTH_REQUEST, GET_AUTH_SUCCESS, GET_AUTH_FAILED, GET_TOKEN_REQUEST, GET_TOKEN_SUCCESS, GET_TOKEN_FAILED } from '../action-types';\nexport const getLoginRequest = createAction(GET_LOGIN_REQUEST);\nexport const getLoginSuccess = createAction(GET_LOGIN_SUCCESS);\nexport const getLoginFailed = createAction(GET_LOGIN_FAILED);\nexport const getRegisterRequest = createAction(GET_REGISTER_REQUEST);\nexport const getRegisterSuccess = createAction(GET_REGISTER_SUCCESS);\nexport const getRegisterFailed = createAction(GET_REGISTER_FAILED);\nexport const getLogoutRequest = createAction(GET_LOGOUT_REQUEST);\nexport const getLogoutSuccess = createAction(GET_LOGOUT_SUCCESS);\nexport const getLogoutFailed = createAction(GET_LOGOUT_FAILED);\nexport const getUserRequest = createAction(GET_USER_REQUEST);\nexport const getUserSuccess = createAction(GET_USER_SUCCESS);\nexport const getUserFailed = createAction(GET_USER_FAILED);\nexport const getRefreshUserRequest = createAction(GET_REFRESH_USER_REQUEST);\nexport const getRefreshUserSuccess = createAction(GET_REFRESH_USER_SUCCESS);\nexport const getRefreshUserFailed = createAction(GET_REFRESH_USER_FAILED);\nexport const getAuthRequest = createAction(GET_AUTH_REQUEST);\nexport const getAuthSuccess = createAction(GET_AUTH_SUCCESS);\nexport const getAuthFailed = createAction(GET_AUTH_FAILED);\nexport const getTokenRequest = createAction(GET_TOKEN_REQUEST);\nexport const getTokenSuccess = createAction(GET_TOKEN_SUCCESS);\nexport const getTokenFailed = createAction(GET_TOKEN_FAILED);\nexport const getLogin = body => async dispatch => {\n  dispatch(getLoginRequest());\n\n  try {\n    const res = await fetchRequest.post('auth/login', body);\n    const obj = await checkResponse(res); //const obj = await getLoginRequestApi(body);\n    //console.log(obj)\n\n    if (obj) {\n      dispatch(getLoginSuccess(obj));\n      dispatch({\n        type: getUserSuccess,\n        user: obj\n      });\n      dispatch({\n        type: getAuthSuccess,\n        auth: obj\n      });\n      const accessToken = obj.accessToken.split('Bearer ')[1];\n      const refreshToken = obj.refreshToken;\n\n      if (refreshToken) {\n        setCookie('refreshToken', refreshToken);\n      }\n\n      if (accessToken) {\n        setCookie('accessToken', accessToken);\n      }\n    } else {\n      dispatch(getLoginFailed());\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch(getLoginFailed());\n  }\n\n  ;\n};\nexport const getAuth = () => async dispatch => {\n  dispatch({\n    type: getAuthRequest\n  });\n  const refreshToken = getCookie('refreshToken');\n\n  if (refreshToken) {\n    try {\n      const res = await fetchRequest.post('auth/token', {\n        'token': refreshToken\n      });\n      const obj = await checkResponse(res); //const obj = await getLoginRequestApi(body);\n\n      if (obj) {\n        dispatch({\n          type: getAuthSuccess,\n          auth: obj\n        });\n        const accessToken = obj.accessToken.split('Bearer ')[1];\n        const refreshToken = obj.refreshToken;\n\n        if (refreshToken) {\n          setCookie('refreshToken', refreshToken);\n        }\n\n        if (accessToken) {\n          setCookie('accessToken', accessToken);\n        }\n      } else {\n        dispatch({\n          type: getAuthFailed\n        });\n      }\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: getAuthFailed\n      });\n    }\n  } else {\n    dispatch({\n      type: getAuthFailed\n    });\n  }\n};\nexport const getUser = () => async dispatch => {\n  dispatch({\n    type: getUserRequest\n  });\n  await getAuth();\n  const accessToken = getCookie('accessToken');\n\n  if (accessToken) {\n    try {\n      const res = await fetchRequest.get('auth/user', {\n        'Authorization': 'Token ' + accessToken\n      });\n      const obj = await checkResponse(res); // const obj = await getLoginRequestApi({});\n\n      if (obj) {\n        dispatch({\n          type: getUserSuccess,\n          user: obj\n        });\n      } else {\n        dispatch({\n          type: getUserFailed\n        });\n      }\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: getUserFailed\n      });\n    }\n  } else {\n    dispatch({\n      type: getUserFailed\n    });\n  }\n};\nexport const getRegister = body => async dispatch => {\n  dispatch(getRegisterRequest());\n\n  try {\n    const res = await fetchRequest.post('auth/register', body);\n    const obj = await checkResponse(res);\n\n    if (obj) {\n      dispatch(getRegisterSuccess(obj));\n      const accessToken = obj.accessToken.split('Bearer ')[1];\n      const refreshToken = obj.refreshToken;\n\n      if (refreshToken) {\n        setCookie('refreshToken', refreshToken);\n      }\n\n      if (accessToken) {\n        setCookie('accessToken', accessToken);\n      }\n    } else {\n      dispatch(getRegisterFailed());\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch(getRegisterFailed());\n  }\n\n  ;\n};\nexport const getLogout = () => async dispatch => {\n  dispatch(getLogoutRequest());\n  const refreshToken = getCookie('refreshToken');\n\n  if (refreshToken) {\n    try {\n      const res = await fetchRequest.post('auth/logout', {\n        'token': refreshToken\n      });\n      const obj = await checkResponse(res); //const obj = await getLogoutRequestApi();\n\n      if (obj) {\n        dispatch(getLogoutSuccess(obj));\n        dispatch({\n          type: getUserSuccess,\n          user: {}\n        });\n        dispatch({\n          type: getUserFailed\n        });\n        dispatch({\n          type: getAuthSuccess,\n          auth: {}\n        });\n        dispatch({\n          type: getAuthFailed\n        });\n        const accessToken = getCookie('accessToken');\n        const refreshToken = getCookie('refreshToken');\n\n        if (refreshToken) {\n          deleteCookie('refreshToken');\n        }\n\n        if (accessToken) {\n          deleteCookie('accessToken');\n        }\n      } else {\n        dispatch(getLogoutFailed());\n      }\n    } catch (error) {\n      console.log(error);\n      dispatch(getLogoutFailed());\n    }\n\n    ;\n  } else {\n    dispatch(getLogoutFailed());\n  }\n};\nexport const getRefreshUser = function () {\n  let body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  return async dispatch => {\n    dispatch({\n      type: getRefreshUserRequest\n    });\n    const accessToken = getCookie('accessToken');\n\n    if (accessToken) {\n      try {\n        const obj = undefined;\n\n        if (body !== null) {\n          const res = await fetchRequest.patch('auth/user', body, {\n            'Authorization': 'Token ' + accessToken\n          });\n          const obj = await checkResponse(res);\n        }\n\n        if (obj) {\n          dispatch({\n            type: getRefreshUserSuccess,\n            refreshUser: obj\n          });\n          dispatch({\n            type: getUserSuccess,\n            user: obj\n          });\n        } else {\n          dispatch({\n            type: getRefreshUserFailed\n          });\n        }\n      } catch (error) {\n        console.log(error);\n        dispatch({\n          type: getRefreshUserFailed\n        });\n      }\n    } else {\n      dispatch({\n        type: getRefreshUserFailed\n      });\n    }\n  };\n};","map":{"version":3,"names":["createAction","checkResponse","setCookie","getCookie","deleteCookie","fetchRequest","GET_LOGIN_REQUEST","GET_LOGIN_SUCCESS","GET_LOGIN_FAILED","GET_REGISTER_REQUEST","GET_REGISTER_SUCCESS","GET_REGISTER_FAILED","GET_LOGOUT_REQUEST","GET_LOGOUT_SUCCESS","GET_LOGOUT_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","GET_REFRESH_USER_REQUEST","GET_REFRESH_USER_SUCCESS","GET_REFRESH_USER_FAILED","GET_AUTH_REQUEST","GET_AUTH_SUCCESS","GET_AUTH_FAILED","GET_TOKEN_REQUEST","GET_TOKEN_SUCCESS","GET_TOKEN_FAILED","getLoginRequest","getLoginSuccess","getLoginFailed","getRegisterRequest","getRegisterSuccess","getRegisterFailed","getLogoutRequest","getLogoutSuccess","getLogoutFailed","getUserRequest","getUserSuccess","getUserFailed","getRefreshUserRequest","getRefreshUserSuccess","getRefreshUserFailed","getAuthRequest","getAuthSuccess","getAuthFailed","getTokenRequest","getTokenSuccess","getTokenFailed","getLogin","body","dispatch","res","post","obj","type","user","auth","accessToken","split","refreshToken","error","console","log","getAuth","getUser","get","getRegister","getLogout","getRefreshUser","undefined","patch","refreshUser"],"sources":["/home/gog3d/JS/6-yndex-react/0-project/react-burger/src/redux/actions/auth.ts"],"sourcesContent":["import { AppDispatch, AppThunk } from '../store';\nimport { createAction } from \"@reduxjs/toolkit\";\n//import { baseURL }  from '../../utils/config';\n//import { getLoginRequestApi } from './fakeApiAuth';\nimport { checkResponse }  from '../utils';\nimport { TRefreshUser } from '../../types/data';\nimport { setCookie, getCookie, deleteCookie, fetchRequest } from '../utils';\n\nimport {\n  GET_LOGIN_REQUEST,\n  GET_LOGIN_SUCCESS,\n  GET_LOGIN_FAILED,\n  \n  GET_REGISTER_REQUEST,\n  GET_REGISTER_SUCCESS,\n  GET_REGISTER_FAILED,\n  \n  GET_LOGOUT_REQUEST,\n  GET_LOGOUT_SUCCESS,\n  GET_LOGOUT_FAILED,\n   \n  GET_USER_REQUEST,\n  GET_USER_SUCCESS,\n  GET_USER_FAILED,\n  \n  GET_REFRESH_USER_REQUEST,\n  GET_REFRESH_USER_SUCCESS,\n  GET_REFRESH_USER_FAILED,\n  \n  GET_AUTH_REQUEST,\n  GET_AUTH_SUCCESS,\n  GET_AUTH_FAILED,\n\n  GET_TOKEN_REQUEST,\n  GET_TOKEN_SUCCESS,\n  GET_TOKEN_FAILED,\n\n} from '../action-types';\n\nimport { TRegister, TLogin, TUser, TLogout, TToken } from '../../types/data';\n\nexport const getLoginRequest = createAction(GET_LOGIN_REQUEST);\nexport const getLoginSuccess = createAction<TLogin>(GET_LOGIN_SUCCESS);\nexport const getLoginFailed = createAction(GET_LOGIN_FAILED);\n\nexport const getRegisterRequest = createAction(GET_REGISTER_REQUEST);\nexport const getRegisterSuccess = createAction<TRegister>(GET_REGISTER_SUCCESS);\nexport const getRegisterFailed = createAction(GET_REGISTER_FAILED);\n\nexport const getLogoutRequest = createAction(GET_LOGOUT_REQUEST);\nexport const getLogoutSuccess = createAction<TLogout>(GET_LOGOUT_SUCCESS);\nexport const getLogoutFailed = createAction(GET_LOGOUT_FAILED);\n \nexport const getUserRequest = createAction(GET_USER_REQUEST);\nexport const getUserSuccess = createAction(GET_USER_SUCCESS);\nexport const getUserFailed = createAction(GET_USER_FAILED);\n\nexport const getRefreshUserRequest = createAction(GET_REFRESH_USER_REQUEST);\nexport const getRefreshUserSuccess = createAction(GET_REFRESH_USER_SUCCESS);\nexport const getRefreshUserFailed = createAction(GET_REFRESH_USER_FAILED);\n\nexport const getAuthRequest = createAction(GET_AUTH_REQUEST);\nexport const getAuthSuccess = createAction(GET_AUTH_SUCCESS);\nexport const getAuthFailed = createAction(GET_AUTH_FAILED);\n\nexport const getTokenRequest = createAction(GET_TOKEN_REQUEST);\nexport const getTokenSuccess = createAction<TToken>(GET_TOKEN_SUCCESS);\nexport const getTokenFailed = createAction(GET_TOKEN_FAILED);\n\nexport type TAuthAction = ReturnType<typeof getLoginRequest>\n                          | ReturnType<typeof getLoginSuccess>\n                          | ReturnType<typeof getLoginFailed>\n                          | ReturnType<typeof getRegisterRequest>\n                          | ReturnType<typeof getRegisterSuccess>\n                          | ReturnType<typeof getRegisterFailed>\n                          | ReturnType<typeof getLogoutRequest>\n                          | ReturnType<typeof getLogoutSuccess>\n                          | ReturnType<typeof getLogoutFailed>\n                          | ReturnType<typeof getUserRequest>\n                          | ReturnType<typeof getUserSuccess>\n                          | ReturnType<typeof getUserFailed>\n                          | ReturnType<typeof getRefreshUserRequest>\n                          | ReturnType<typeof getRefreshUserSuccess>\n                          | ReturnType<typeof getRefreshUserFailed>\n                          | ReturnType<typeof getAuthRequest>\n                          | ReturnType<typeof getAuthSuccess>\n                          | ReturnType<typeof getAuthFailed>\n                          | ReturnType<typeof getTokenRequest>\n                          | ReturnType<typeof getTokenSuccess>\n                          | ReturnType<typeof getTokenFailed>;\n                          \nexport type TLoginPostBody = {\n  email:string,\n  password: string\n}\nexport type TAuthPostBody = {\n  token: string\n}\n\nexport const getLogin = (body: TLoginPostBody) => async (dispatch: AppDispatch) => {\n  dispatch(getLoginRequest());\n  try {\n    const res = await fetchRequest.post('auth/login', body);\n    const obj = await checkResponse(res);\n    //const obj = await getLoginRequestApi(body);\n    //console.log(obj)\n      if (obj) {\n        dispatch(getLoginSuccess(obj));\n        dispatch({ type: getUserSuccess, user: obj});\n        dispatch({ type: getAuthSuccess, auth: obj});\n        const  accessToken = obj.accessToken.split('Bearer ')[1];\n        const  refreshToken = obj.refreshToken;\n        if (refreshToken) {\n          setCookie('refreshToken', refreshToken);\n        }\n        if (accessToken) {\n          setCookie('accessToken', accessToken);\n        }\n      } else {\n        dispatch(getLoginFailed());\n      }\n  } catch(error) {\n    console.log(error);\n    dispatch(getLoginFailed());\n  };\n};\n\nexport const getAuth = () => async (dispatch: AppDispatch) => {\n  dispatch({ type: getAuthRequest });\n  const refreshToken = getCookie('refreshToken');\n  if (refreshToken) {\n    try {\n      const res = await fetchRequest.post('auth/token', { 'token' : refreshToken });\n      const obj = await checkResponse(res);\n      //const obj = await getLoginRequestApi(body);\n        if (obj) {\n          dispatch({ type: getAuthSuccess, auth: obj});\n          const  accessToken = obj.accessToken.split('Bearer ')[1];\n          const  refreshToken = obj.refreshToken;\n          if (refreshToken) {\n            setCookie('refreshToken', refreshToken);\n          }\n          if (accessToken) {\n            setCookie('accessToken', accessToken);\n          }\n        } else {\n          dispatch({ type: getAuthFailed });\n        }\n    } catch(error) {\n      console.log(error);\n      dispatch({ type: getAuthFailed });\n    }\n  } else {\n    dispatch({ type: getAuthFailed });\n  }\n};\n\nexport const getUser =  () => async (dispatch: AppDispatch) => {\n  dispatch({ type: getUserRequest });\n  await getAuth();\n  const accessToken = getCookie('accessToken');\n  if(accessToken) {\n    try {\n      const res = await fetchRequest.get('auth/user', { 'Authorization': 'Token '+ accessToken });\n      const obj = await checkResponse(res);\n     // const obj = await getLoginRequestApi({});\n      if (obj) {\n        dispatch({ type: getUserSuccess, user: obj});\n      } else {\n        dispatch({ type: getUserFailed });\n      }\n    } catch(error){\n        console.log(error)\n        dispatch({ type: getUserFailed });\n    }\n  } else {\n    dispatch({ type: getUserFailed });\n  }\n};\n\nexport type TRegisterBody = { \n  email: string, \n  password: string, \n  name: string\n }\n\nexport const getRegister = (body: TRegisterBody) => async (dispatch: AppDispatch) => {\n  dispatch(getRegisterRequest());\n  try {\n    const res = await fetchRequest.post('auth/register', body);\n    const obj = await checkResponse(res);\n      if (obj) {\n        dispatch(getRegisterSuccess(obj));\n        const  accessToken = obj.accessToken.split('Bearer ')[1];\n        const  refreshToken = obj.refreshToken;\n        if (refreshToken) {\n          setCookie('refreshToken', refreshToken);\n        }\n        if (accessToken) {\n          setCookie('accessToken', accessToken);\n        }\n      } else {\n        dispatch(getRegisterFailed());\n      }\n  } catch(error) {\n    console.log(error);\n    dispatch(getRegisterFailed());\n  };\n};\n\nexport const getLogout = () => async (dispatch: AppDispatch) => {\n  dispatch(getLogoutRequest());\n  const refreshToken = getCookie('refreshToken');\n  if (refreshToken) {\n    try {\n    const res = await fetchRequest.post('auth/logout', { 'token' : refreshToken });\n    const obj = await checkResponse(res);\n    //const obj = await getLogoutRequestApi();\n      if (obj) {\n        dispatch(getLogoutSuccess(obj));\n        dispatch({ type: getUserSuccess, user: {}});\n        dispatch({ type: getUserFailed });\n        dispatch({ type: getAuthSuccess, auth: {}});\n        dispatch({ type: getAuthFailed });\n        const  accessToken = getCookie('accessToken');\n        const  refreshToken = getCookie('refreshToken');\n        if (refreshToken) {\n          deleteCookie('refreshToken');\n        }\n        if (accessToken) {\n          deleteCookie('accessToken');\n        }\n      } else {\n        dispatch(getLogoutFailed());\n      }\n  } catch(error) {\n    console.log(error);\n    dispatch(getLogoutFailed());\n  };\n  } else {\n    dispatch(getLogoutFailed());\n  \n  }\n};\n\nexport const getRefreshUser = (body: (TRefreshUser | null) = null) => async (dispatch: AppDispatch) => {\n  dispatch({ type: getRefreshUserRequest });\n  const accessToken = getCookie('accessToken');\n  if(accessToken) {\n    try {\n      const obj = undefined;  \n      if (body !== null) {\n        const res = await fetchRequest.patch('auth/user', body, \n          { 'Authorization': 'Token '+ accessToken });\n        const obj = await checkResponse(res);\n      }\n      if (obj) {\n        dispatch({ type: getRefreshUserSuccess, refreshUser: obj});\n        dispatch({ type: getUserSuccess, user: obj});\n      } else {\n        dispatch({ type: getRefreshUserFailed });\n      }\n    } catch(error){\n        console.log(error)\n        dispatch({ type: getRefreshUserFailed });\n    }\n  } else {\n    dispatch({ type: getRefreshUserFailed });\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}