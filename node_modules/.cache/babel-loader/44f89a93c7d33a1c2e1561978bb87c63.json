{"ast":null,"code":"var _jsxFileName = \"/home/gog3d/JS/6-yndex-react/0-project/react-burger/src/pages/order-information-page.tsx\",\n    _s = $RefreshSig$();\n\nimport styles from './order-information-page.module.css';\nimport { useMemo } from 'react';\nimport React, { useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport OrderInformationComponent from '../components/order-information-component/order-information-component';\nimport { wsUserConnectionStart, wsUserDisconnect } from '../redux/actions/wsUserAction';\nimport { wsConnectionStart, wsDisconnect } from '../redux/actions/wsAction';\nimport { getCookie } from '../redux/utils';\nimport { useAppDispatch, useAppSelector } from '../redux/hooks';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const OrderInformationPage = () => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const {\n    id\n  } = useParams();\n  const {\n    wsUserError,\n    wsUserConnected,\n    wsUserOrders,\n    wsUserOrdersTotal,\n    wsUserOrdersTotalToday\n  } = useAppSelector(store => store.wsUserOrders);\n  const {\n    wsError,\n    wsConnected,\n    wsOrders,\n    wsOrdersTotal,\n    wsOrdersTotalToday\n  } = useAppSelector(store => store.wsOrders);\n  useEffect(() => {\n    dispatch({\n      type: wsConnectionStart,\n      payload: '/all'\n    });\n    const accessToken = getCookie('accessToken');\n    dispatch({\n      type: wsUserConnectionStart,\n      payload: `?token=${accessToken}`\n    }); //dispatch({ type: wsUserConnectionStart, payload: ':3002' });\n\n    return () => {\n      dispatch({\n        type: wsUserDisconnect\n      });\n      dispatch({\n        type: wsDisconnect\n      });\n    };\n  }, [dispatch]);\n  const order = useMemo(() => {\n    if (wsOrders) {\n      const allOrders = wsOrders.find(order => order._id === id);\n      if (allOrders) return allOrders;\n    }\n\n    if (wsUserOrders) {\n      const userOrders = wsUserOrders.find(order => order._id === id);\n\n      if (userOrders) {\n        return userOrders;\n      } else {\n        console.log('orders is empty');\n        return null;\n      }\n    }\n  }, [wsOrders, wsUserOrders]);\n  if (!order) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles['order-information'],\n    children: /*#__PURE__*/_jsxDEV(OrderInformationComponent, {\n      order: order\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(OrderInformationPage, \"cU4PAkQDdgAXUMfseXraaqRd6W8=\", false, function () {\n  return [useAppDispatch, useParams, useAppSelector, useAppSelector];\n});\n\n_c = OrderInformationPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderInformationPage\");","map":{"version":3,"names":["styles","useMemo","React","useEffect","useParams","OrderInformationComponent","wsUserConnectionStart","wsUserDisconnect","wsConnectionStart","wsDisconnect","getCookie","useAppDispatch","useAppSelector","OrderInformationPage","dispatch","id","wsUserError","wsUserConnected","wsUserOrders","wsUserOrdersTotal","wsUserOrdersTotalToday","store","wsError","wsConnected","wsOrders","wsOrdersTotal","wsOrdersTotalToday","type","payload","accessToken","order","allOrders","find","_id","userOrders","console","log"],"sources":["/home/gog3d/JS/6-yndex-react/0-project/react-burger/src/pages/order-information-page.tsx"],"sourcesContent":["import styles from './order-information-page.module.css';\nimport { useMemo } from 'react'\nimport React, { useEffect } from 'react';\nimport {\n  useParams\n} from \"react-router-dom\";\n\nimport OrderInformationComponent from '../components/order-information-component/order-information-component';\nimport { wsUserConnectionStart, wsUserDisconnect } from '../redux/actions/wsUserAction';\nimport { wsConnectionStart, wsDisconnect } from '../redux/actions/wsAction';\nimport { getCookie } from '../redux/utils';\n\nimport { useAppDispatch, useAppSelector } from '../redux/hooks';\n\nexport const OrderInformationPage: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const { id } = useParams<{ id: string }>();\n\n  \n  const { \n    wsUserError, \n    wsUserConnected, \n    wsUserOrders, \n    wsUserOrdersTotal, \n    wsUserOrdersTotalToday \n  } = useAppSelector((store) => store.wsUserOrders);\n\n  const { \n    wsError, \n    wsConnected, \n    wsOrders, \n    wsOrdersTotal, \n    wsOrdersTotalToday \n  } = useAppSelector((store) => store.wsOrders);\n\n  useEffect(() => {\n    dispatch({ type: wsConnectionStart, payload: '/all' });\n    const accessToken = getCookie('accessToken')\n    dispatch({ type: wsUserConnectionStart, payload: `?token=${accessToken}` });\n    //dispatch({ type: wsUserConnectionStart, payload: ':3002' });\n    return () => {\n      dispatch({type: wsUserDisconnect});\n      dispatch({type: wsDisconnect});\n    }\n  }, [dispatch]);\n  \n  const order = useMemo(() => {\n      if(wsOrders) {\n        const allOrders = wsOrders.find((order) => order._id === id);\n        if (allOrders) return allOrders;\n      } \n      if(wsUserOrders) {\n        const userOrders = wsUserOrders.find((order) => order._id === id);\n        if (userOrders) {\n          return userOrders;\n        } else{\n          console.log('orders is empty');\n          return null;\n        }\n      } \n  }, [wsOrders, wsUserOrders]);\n\n  if (!order) return null;\n\n  return (\n    <div className={styles['order-information']} >\n      <OrderInformationComponent order={order}/>\n    </div>\n  )\n}\n"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,qCAAnB;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SACEC,SADF,QAEO,kBAFP;AAIA,OAAOC,yBAAP,MAAsC,uEAAtC;AACA,SAASC,qBAAT,EAAgCC,gBAAhC,QAAwD,+BAAxD;AACA,SAASC,iBAAT,EAA4BC,YAA5B,QAAgD,2BAAhD;AACA,SAASC,SAAT,QAA0B,gBAA1B;AAEA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,gBAA/C;;AAEA,OAAO,MAAMC,oBAA8B,GAAG,MAAM;EAAA;;EAClD,MAAMC,QAAQ,GAAGH,cAAc,EAA/B;EACA,MAAM;IAAEI;EAAF,IAASX,SAAS,EAAxB;EAGA,MAAM;IACJY,WADI;IAEJC,eAFI;IAGJC,YAHI;IAIJC,iBAJI;IAKJC;EALI,IAMFR,cAAc,CAAES,KAAD,IAAWA,KAAK,CAACH,YAAlB,CANlB;EAQA,MAAM;IACJI,OADI;IAEJC,WAFI;IAGJC,QAHI;IAIJC,aAJI;IAKJC;EALI,IAMFd,cAAc,CAAES,KAAD,IAAWA,KAAK,CAACG,QAAlB,CANlB;EAQArB,SAAS,CAAC,MAAM;IACdW,QAAQ,CAAC;MAAEa,IAAI,EAAEnB,iBAAR;MAA2BoB,OAAO,EAAE;IAApC,CAAD,CAAR;IACA,MAAMC,WAAW,GAAGnB,SAAS,CAAC,aAAD,CAA7B;IACAI,QAAQ,CAAC;MAAEa,IAAI,EAAErB,qBAAR;MAA+BsB,OAAO,EAAG,UAASC,WAAY;IAA9D,CAAD,CAAR,CAHc,CAId;;IACA,OAAO,MAAM;MACXf,QAAQ,CAAC;QAACa,IAAI,EAAEpB;MAAP,CAAD,CAAR;MACAO,QAAQ,CAAC;QAACa,IAAI,EAAElB;MAAP,CAAD,CAAR;IACD,CAHD;EAID,CATQ,EASN,CAACK,QAAD,CATM,CAAT;EAWA,MAAMgB,KAAK,GAAG7B,OAAO,CAAC,MAAM;IACxB,IAAGuB,QAAH,EAAa;MACX,MAAMO,SAAS,GAAGP,QAAQ,CAACQ,IAAT,CAAeF,KAAD,IAAWA,KAAK,CAACG,GAAN,KAAclB,EAAvC,CAAlB;MACA,IAAIgB,SAAJ,EAAe,OAAOA,SAAP;IAChB;;IACD,IAAGb,YAAH,EAAiB;MACf,MAAMgB,UAAU,GAAGhB,YAAY,CAACc,IAAb,CAAmBF,KAAD,IAAWA,KAAK,CAACG,GAAN,KAAclB,EAA3C,CAAnB;;MACA,IAAImB,UAAJ,EAAgB;QACd,OAAOA,UAAP;MACD,CAFD,MAEM;QACJC,OAAO,CAACC,GAAR,CAAY,iBAAZ;QACA,OAAO,IAAP;MACD;IACF;EACJ,CAdoB,EAclB,CAACZ,QAAD,EAAWN,YAAX,CAdkB,CAArB;EAgBA,IAAI,CAACY,KAAL,EAAY,OAAO,IAAP;EAEZ,oBACE;IAAK,SAAS,EAAE9B,MAAM,CAAC,mBAAD,CAAtB;IAAA,uBACE,QAAC,yBAAD;MAA2B,KAAK,EAAE8B;IAAlC;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAKD,CAvDM;;GAAMjB,oB;UACMF,c,EACFP,S,EASXQ,c,EAQAA,c;;;KAnBOC,oB"},"metadata":{},"sourceType":"module"}